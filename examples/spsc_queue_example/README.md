# 单生产者-单消费者无锁队列示例

本示例展示了如何使用 `BoundedSpscLockfreeQueue` 类进行高性能线程间通信。该队列是专为单生产者-单消费者场景优化的无锁实现，适合需要低延迟高吞吐量的应用。

## 主要特性

- **无锁实现**：通过原子操作和内存序保证线程安全，避免锁开销
- **有界队列**：预分配固定大小的存储空间，避免动态内存分配
- **SPSC特化**：仅支持单生产者-单消费者模式，但性能最优
- **缓存友好**：通过字节对齐减少伪共享，提升缓存命中率

## 示例应用

本目录包含三个示例应用，展示了不同使用场景下的队列应用：

### 1. 基础示例 (basic_example)

简单演示队列的基本使用方法，包括初始化、入队和出队操作。适合初次了解队列的用户。

```bash
./basic_example
```

### 2. 数据处理示例 (data_processing_example)

模拟实际的传感器数据采集和处理流水线。生产者模拟多个传感器产生数据，消费者对数据进行处理和分析。

```bash
./data_processing_example
```

### 3. 延迟基准测试 (latency_benchmark)

全面的性能基准测试工具，用于评估队列在不同配置和负载条件下的性能表现。提供详细的延迟统计和吞吐量报告。

```bash
./latency_benchmark
```

## 编译与运行

### 编译所有示例

```bash
mkdir build
cd build
cmake ..
make
```

### 运行特定示例

```bash
cd build
./basic_example
./data_processing_example
./latency_benchmark
```

## 应用场景

- 机器人控制系统中的传感器数据处理
- 实时音视频处理中的数据传输
- 高频交易系统中的消息传递
- 游戏引擎中的物理计算与渲染通信
- 对延迟敏感的任何生产者-消费者架构

## 性能优化建议

1. 将队列大小设置为2的幂可获得更好的性能（启用位掩码优化）
2. 合理设置队列大小：太小会导致频繁队列满，太大会浪费内存
3. 使用批处理模式可提高吞吐量，特别是在高负载情况下
4. 避免生产者和消费者速度不匹配造成的队列频繁为空或为满

## 线程安全说明

- 该队列仅适用于单生产者-单消费者场景
- 生产者线程负责调用 `Enqueue` 和 `EnqueueOverwrite` 方法
- 消费者线程负责调用 `Dequeue` 和 `DequeueLatest` 方法
- 同一个线程不应同时执行入队和出队操作
